<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tic Tac Toe | Smart AI</title>
<style>
*{box-sizing:border-box}
body{
    margin:0;
    height:100vh;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:Segoe UI,sans-serif;
}

/* MENU */
.menu{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.9);
    display:flex;
    justify-content:center;
    align-items:center;
}
.menu-box{
    background:#1e293b;
    padding:30px 45px;
    border-radius:22px;
    text-align:center;
}
.menu-box h1{
    color:#fff;
    margin-bottom:25px;
}
.menu-box button{
    width:240px;
    padding:14px;
    margin:10px 0;
    font-size:17px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    background:#38bdf8;
    transition:.2s;
}
.menu-box button:hover{
    background:#0ea5e9;
    transform:scale(1.08);
}

/* GAME */
.game-box{
    background:rgba(255,255,255,.08);
    padding:25px;
    border-radius:20px;
    text-align:center;
    box-shadow:0 15px 40px rgba(0,0,0,.4);
    display:none;
}
h2{color:#fff}

.board{
    display:grid;
    grid-template-columns:repeat(3,100px);
    gap:10px;
    justify-content:center;
    margin:15px 0;
}
.cell{
    width:100px;
    height:100px;
    background:rgba(255,255,255,.15);
    border-radius:15px;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:48px;
    cursor:pointer;
    transition:.2s;
}
.cell:hover{
    background:rgba(255,255,255,.25);
    transform:scale(1.05);
}
.cell.win{
    background:#00e676;
    color:#000;
}
.status{
    color:#fff;
    font-size:18px;
    margin-bottom:10px;
}

.controls img{
    width:55px;
    cursor:pointer;
    transition:.2s;
}
.controls img:hover{transform:scale(1.15)}
</style>
</head>

<body>

<!-- START MENU -->
<div class="menu" id="menu">
    <div class="menu-box">
        <h1>Tic Tac Toe üòàüòá</h1>
        <button onclick="startPvP()">‚ñ∂ Player vs Player</button>
        <button onclick="startAI()">ü§ñ Player vs AI</button>
    </div>
</div>

<!-- GAME -->
<div class="game-box" id="game">
    <h2>Tic Tac Toe</h2>
    <div class="status" id="status"></div>
    <div class="board" id="board"></div>

    <div class="controls">
        <img src="https://i.ibb.co/C3H6xpMw/restart.png" onclick="restartGame()" title="Restart">
    </div>
</div>

<script>
const menu = document.getElementById("menu");
const game = document.getElementById("game");
const board = document.getElementById("board");
const statusText = document.getElementById("status");

const PLAYER = "üòà";
const AI = "üòá";

let aiMode = false;
let current = PLAYER;
let active = true;
let state = Array(9).fill("");

const wins = [
  [0,1,2],[3,4,5],[6,7,8],
  [0,3,6],[1,4,7],[2,5,8],
  [0,4,8],[2,4,6]
];

function startPvP(){
    aiMode=false;
    startGame();
}
function startAI(){
    aiMode=true;
    startGame();
}

function startGame(){
    menu.style.display="none";
    game.style.display="block";
    init();
}

function restartGame(){
    init();
}

function init(){
    board.innerHTML="";
    state.fill("");
    active=true;
    current=PLAYER;
    statusText.textContent=`Player ${PLAYER} turn`;

    for(let i=0;i<9;i++){
        const cell=document.createElement("div");
        cell.className="cell";
        cell.onclick=()=>makeMove(cell,i);
        board.appendChild(cell);
    }
}

function makeMove(cell,i){
    if(!active || state[i]) return;

    state[i]=current;
    cell.textContent=current;

    if(checkWin(current)){
        statusText.textContent=`${current} wins üéâ`;
        active=false;
        return;
    }

    if(!state.includes("")){
        statusText.textContent="Draw üòê";
        active=false;
        return;
    }

    if(aiMode){
        current = current===PLAYER ? AI : PLAYER;
        statusText.textContent = current===AI ? "AI thinking ü§ñ..." : `Player ${PLAYER} turn`;

        if(current===AI){
            setTimeout(aiMove,500);
        }
    }else{
        current = current===PLAYER ? AI : PLAYER;
        statusText.textContent=`Player ${current} turn`;
    }
}

function aiMove(){
    if(!active) return;

    let bestScore = -Infinity;
    let move;

    for(let i=0;i<9;i++){
        if(state[i]==""){
            state[i]=AI;
            let score = minimax(state,0,false);
            state[i]="";
            if(score>bestScore){
                bestScore=score;
                move=i;
            }
        }
    }

    document.querySelectorAll(".cell")[move].click();
}

function minimax(boardState,depth,isMax){
    if(checkWinner(AI)) return 10-depth;
    if(checkWinner(PLAYER)) return depth-10;
    if(!boardState.includes("")) return 0;

    if(isMax){
        let best=-Infinity;
        for(let i=0;i<9;i++){
            if(boardState[i]==""){
                boardState[i]=AI;
                best=Math.max(best,minimax(boardState,depth+1,false));
                boardState[i]="";
            }
        }
        return best;
    }else{
        let best=Infinity;
        for(let i=0;i<9;i++){
            if(boardState[i]==""){
                boardState[i]=PLAYER;
                best=Math.min(best,minimax(boardState,depth+1,true));
                boardState[i]="";
            }
        }
        return best;
    }
}

function checkWin(player){
    return wins.some(w=>{
        const[a,b,c]=w;
        if(state[a]==player && state[b]==player && state[c]==player){
            document.querySelectorAll(".cell")[a].classList.add("win");
            document.querySelectorAll(".cell")[b].classList.add("win");
            document.querySelectorAll(".cell")[c].classList.add("win");
            return true;
        }
    });
}

function checkWinner(player){
    return wins.some(w=>{
        const[a,b,c]=w;
        return state[a]==player && state[b]==player && state[c]==player;
    });
}
</script>

</body>
</html>
